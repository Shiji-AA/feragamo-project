<%-include("../layoutsAdmin/header.ejs")%>

              

    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="index.html" class="brand-wrap">
                <img src="/admin-assets/imgs/theme/feragamo.jpg" class="logo" alt="Dashboard">
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i> </button>
            </div>
        </div>
        <nav>
            <ul class="menu-aside">
                <li class="menu-item ">
                    <a class="menu-link" href="/admin/Dashboard"> <i class="icon material-icons md-home"></i>
                        <span class="text">Dashboard</span>
                    </a>
                </li>
                <li class="menu-item ">
                    <a class="menu-link" href="/admin/dashboard/products"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Products</span>
                    </a>
               </li>
                <li class="menu-item ">
                    <a class="menu-link" href="/admin/dashboard/ordersPagination"> <i class="icon material-icons md-shopping_cart"></i>
                        <span class="text">Orders</span>
                    </a>
               </li>
                <li class="menu-item ">
                    <a class="menu-link" href="/admin/dashboard/users"> <i class="icon material-icons md-person"></i>
                        <span class="text">Users</span>
                    </a>
                </li>
                <li class="menu-item ">
                    <a class="menu-link" href="/admin/dashboard/categories"> <i class="icon material-icons md-add_box"></i>
                        <span class="text">Category</span>
                    </a>
                    </li>
                <li class="menu-item ">
                    <a class="menu-link" href="/admin/dashboard/salesreport"> <i class="icon material-icons md-comment"></i>
                        <span class="text">Sales Report</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link"  href="/admin/dashboard/offer"> <i class="icon material-icons md-pie_chart"></i>
                        <span class="text">Offer Management</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link"  href="/admin/dashboard/coupon"> <i class="icon material-icons md-pie_chart"></i>
                        <span class="text">Manage coupon</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/dashboard/banner"> <i class="icon material-icons md-local_offer"></i>
                        <span class="text"> Banner Management</span>
                    </a>
                </li>
            </ul>
            
            <br>
            <br>
        </nav>
    </aside>


   

    <main class="main-wrap">
        
        <header class="main-header navbar">
            <div class="col-search">
                <a href="/admin/logout" class="btn btn-primary"></i>Log Out</a>
            </div>
        </header>



        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Order Management </h2>
                    
                </div>
                
            </div>


            
            <div class="card mb-4">            
               <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th># OrderId</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">OrderValue</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Ordered On</th>
                                    <th scope="col" class="text-end"> Action </th>
                                    <th scope="col">Return</th>
                                    

                                </tr>
                            </thead>
                            <tbody>
                            </tr>
                            <% for (let i = orders.length - 1; i >= 0; i--) { %>
                                <tr>
                                    <td><%= orders[i].orderId %></td>
                                    <td><b><%= orders[i].address.name %></b></td>
                                    <td>shijihcl@gmail.com</td>
                                    <td><%= orders[i].totalAmount %></td>
                                    
                                    
                                    <td>
                                        <span class="badge rounded-pill 
                                            <% 
                                                if (orders[i].status === 'Shipped') {
                                                    %>status-shipped<%
                                                } else if (orders[i].status === 'Delivered') {
                                                    %>status-delivered<%
                                                } else if (orders[i].status === 'Pending') {
                                                    %>status-pending<%
                                                } else if (orders[i].status === 'Cancelled') {
                                                    %>status-cancelled<%
                                                }
                                            %>
                                            " ><%= orders[i].status %>
                                        </span>
                                    </td>


                                    <td><%= orders[i].createdOn %></td>

                                    <td class="text-end">
                                        <a href="/orders/edit/<%= orders[i]._id %>" class="btn btn-md rounded font-sm">Edit</a>
                                      </td>
                                      
                                    <td>
                                    <% if (orders[i].returnStatus === "Request Pending") { %>
                                    <button style="background-color: rgb(248, 7, 7);border-color:rgb(248, 7, 7) ;" class="badge rounded-pill" id="requestPendingButton">Request Pending</button>                                          
                                    <% } else { %>                                     
                                    <% } %>
                                    </td>
                                   
                                </tr>
                            <% } %>
                              
                            </tbody>
                        </table>
                    </div> <!-- table-responsive //end -->
                </div> <!-- card-body end// -->
            </div> <!-- card end// -->
            
</section> <!-- content-main end// -->



<div class="pagination-area mt-0 mb-100" style="margin-left: 600px;">
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-start">
            <% for (let index = 1; index<=count; index++) { %>
                <li class="page-item <%= page == index ? 'active' : '' %>">
                    <a class="page-link" href="/admin/dashboard/ordersPagination?page=<%= index %>">
                        <%= index %>
                    </a>
                </li>
            <% } %>
        </ul>
    </nav>
</div><br><br>


<footer class="main-footer font-xs">
    <div class="row pb-30 pt-15">
        <div class="col-sm-6">
            <script data-cfasync="false" src="../../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
            document.write(new Date().getFullYear())
            </script> Â©, Evara - HTML Ecommerce Template .
        </div>
        <div class="col-sm-6">
            <div class="text-sm-end">
                All rights reserved
            </div>
        </div>
    </div>
    
</footer>
    </main>

    <script src="assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vendors/select2.min.js"></script>
    <script src="assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="assets/js/main.js" type="text/javascript"></script>






    
    <%-include("../layoutsAdmin/header.ejs")%>